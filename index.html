<!DOCTYPE html>
<html>
<head>
    <title>AR Menu Card</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ar.js/2.5.2/aframe-ar.min.js"></script>
    <style>
        .menu-overlay {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            z-index: 1000;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            max-height: 60vh;
            overflow-y: auto;
            width: 90%;
            max-width: 400px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .menu-item:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .menu-item img {
            width: 50px;
            height: 50px;
            border-radius: 5px;
        }

        .instructions {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 5px;
            z-index: 1000;
            text-align: center;
            font-size: 14px;
            display: none;
        }

        #hide-button {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            padding: 8px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">
    <div class="instructions">
        Show the Hiro marker to the camera to place the selected item
    </div>

    <button id="hide-button" onclick="toggleModel()">Hide Item</button>

    <div class="menu-overlay">
        <div class="menu-item" onclick="showItem('pizza', 'red', '1 0.1 1')">
            <img src="https://via.placeholder.com/50" alt="Pizza">
            <span>Margherita Pizza - $12.99</span>
        </div>
        <div class="menu-item" onclick="showItem('burger', 'brown', '0.8 0.5 0.8')">
            <img src="https://via.placeholder.com/50" alt="Burger">
            <span>Classic Burger - $8.99</span>
        </div>
        <div class="menu-item" onclick="showItem('pasta', 'yellow', '0.7 0.3 0.7')">
            <img src="https://via.placeholder.com/50" alt="Pasta">
            <span>Pasta Alfredo - $10.99</span>
        </div>
        <div class="menu-item" onclick="showItem('salad', 'green', '0.9 0.2 0.9')">
            <img src="https://via.placeholder.com/50" alt="Salad">
            <span>Caesar Salad - $7.99</span>
        </div>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <a-marker preset="hiro" id="item-marker">
            <a-box 
                id="item-model"
                position="0 0.5 0" 
                rotation="0 45 0"
                scale="1 0.1 1"
                material="color: red;"
                visible="false">
            </a-box>
        </a-marker>
        <a-entity camera></a-entity>
    </a-scene>

    <script>
        let isModelVisible = false;
        let currentItem = '';
        const itemModel = document.querySelector('#item-model');
        const instructions = document.querySelector('.instructions');
        const hideButton = document.querySelector('#hide-button');

        function showItem(itemName, color, scale) {
            itemModel.setAttribute('visible', true);
            itemModel.setAttribute('material', 'color', color);
            itemModel.setAttribute('scale', scale);
            currentItem = itemName;
            isModelVisible = true;
            instructions.style.display = 'block';
            hideButton.style.display = 'block';
            hideButton.textContent = `Hide ${itemName.charAt(0).toUpperCase() + itemName.slice(1)}`;
        }

        function toggleModel() {
            isModelVisible = !isModelVisible;
            itemModel.setAttribute('visible', isModelVisible);
            hideButton.textContent = isModelVisible ? 
                `Hide ${currentItem.charAt(0).toUpperCase() + currentItem.slice(1)}` : 
                `Show ${currentItem.charAt(0).toUpperCase() + currentItem.slice(1)}`;
            instructions.style.display = isModelVisible ? 'block' : 'none';
        }

        // Handle marker detection
        const marker = document.querySelector('#item-marker');
        marker.addEventListener('markerFound', () => {
            if (isModelVisible) {
                itemModel.setAttribute('visible', true);
            }
        });

        marker.addEventListener('markerLost', () => {
            itemModel.setAttribute('visible', false);
        });
    </script>
</body>
</html>